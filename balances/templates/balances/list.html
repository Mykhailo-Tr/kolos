{% extends "base.html" %}
{% load humanize %}

{% block content %}
<div class="container mt-4">

  <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ + –∫–Ω–æ–ø–∫–∞ -->
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="mb-0">üì¶ {{ model_name|default:"–ó–∞–ª–∏—à–∫–∏" }}</h2>
    <a href="{% url 'balance_create' %}" class="btn btn-primary">
      ‚ûï –î–æ–¥–∞—Ç–∏ –∑–∞–ø–∏—Å
    </a>
  </div>

  {% if balances %}
    <div class="table-responsive shadow-sm rounded">
      <table class="table table-bordered table-hover align-middle mb-0 sort-table table-striped">
        <thead class="table text-center">
          <tr>
            {% comment %} --- –î–æ–¥–∞—î–º–æ —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è --- {% endcomment %}
            {% with request.GET.order as current_order %}
            <th>#</th>
            <th>
              <a href="?order={% if current_order == 'place__name' %}-place__name{% else %}place__name{% endif %}" class="no-link-style">
                –ú—ñ—Å—Ü–µ
                {% if current_order == 'place__name' %}
                  ‚Üë
                {% elif current_order == '-place__name' %}
                  ‚Üì
                {% endif %}
              </a>
            </th>
            <th>
              <a href="?order={% if current_order == 'culture__name' %}-culture__name{% else %}culture__name{% endif %}" class="no-link-style">
                –ö—É–ª—å—Ç—É—Ä–∞
                {% if current_order == 'culture__name' %}
                  ‚Üë
                {% elif current_order == '-culture__name' %}
                  ‚Üì
                {% endif %}
              </a>
            </th>
            <th>
              <a href="?order={% if current_order == 'balance_type' %}-balance_type{% else %}balance_type{% endif %}" class="no-link-style">
                –¢–∏–ø
                {% if current_order == 'balance_type' %}
                  ‚Üë
                {% elif current_order == '-balance_type' %}
                  ‚Üì
                {% endif %}
              </a>
            </th>
            <th>
              <a href="?order={% if current_order == 'quantity' %}-quantity{% else %}quantity{% endif %}" class="no-link-style">
                –ö—ñ–ª—å–∫—ñ—Å—Ç—å (—Ç)
                {% if current_order == 'quantity' %}
                  ‚Üë
                {% elif current_order == '-quantity' %}
                  ‚Üì
                {% endif %}
              </a>
            </th>
            <th>–î—ñ—ó</th>
            {% endwith %}
          </tr>
        </thead>
        <tbody>
          {% for b in balances %}
          <tr>
            <td class="text-center">{{ forloop.counter }}</td>
            <td>{{ b.place.name }}</td>
            <td>{{ b.culture.name }}</td>
            <td class="text-center">{{ b.get_balance_type_display }}</td>
            <td class="text-end fw-bold">{{ b.quantity|floatformat:3 }}</td>
            <td class="text-center">
              <a href="{% url 'balance_update' b.pk %}" class="btn btn-sm btn-outline-warning">‚úèÔ∏è</a>
              <a href="{% url 'balance_delete' b.pk %}" class="btn btn-sm btn-outline-danger">üóëÔ∏è</a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

  {% else %}
    <div class="alert alert-info mt-3">
      –ü–æ–∫–∏ —â–æ –Ω–µ–º–∞—î –∑–∞–ø–∏—Å—ñ–≤ —É –∂—É—Ä–Ω–∞–ª—ñ –∑–∞–ª–∏—à–∫—ñ–≤.
    </div>
  {% endif %}
</div>
<style>
  .sort-table a.no-link-style {
    color: inherit;
    
  }
  .sort-table a.no-link-style:hover {
    color: inherit;
    text-decoration: none;
    cursor: pointer;
  }
</style>
{% endblock %}

