{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
    <h2>Водії</h2>

    <!-- Кнопка на окрему сторінку -->
    <a href="{% url 'driver_add' %}" class="btn btn-primary mb-3">Додати водія</a>

    <table class="table table-striped">
        <thead>
<tr>
    <th>#</th>
    <th>ПІБ</th>
    <th>Телефон</th>
    <th>Компанія</th>
    <th>Закріплені машини</th>
    <th>Дії</th>
</tr>
</thead>
<tbody>
{% for driver in drivers %}
<tr>
    <td>{{ forloop.counter }}</td>
    <td>{{ driver.full_name }}</td>
    <td>{{ driver.phone }}</td>
    <td>{{ driver.company }}</td>
    <td>
      {% if driver.cars.all %}
        {{ driver.cars.all|join:", " }}
      {% else %}
        —
      {% endif %}
    </td>
    <td>
        <a href="{% url 'driver_edit' driver.id %}" class="btn btn-sm btn-warning">Редагувати</a>
        <button class="btn btn-sm btn-danger" data-bs-toggle="modal" data-bs-target="#deleteModal{{ driver.id }}">
            Видалити
        </button>
    </td>
</tr>
{% endfor %}
</tbody>

    </table>
</div>
{% endblock %}
