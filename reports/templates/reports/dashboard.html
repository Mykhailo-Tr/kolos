{% extends "base.html" %}
{% load static %}

{% block content %}
<style>
  /* –ó–∞–≥–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–Ω—ñ */
  :root {
    --primary: #2563eb;
    --success: #10b981;
    --warning: #f59e0b;
    --danger: #ef4444;
    --info: #3b82f6;
    --secondary: #64748b;
    --border: #e2e8f0;
    --bg-light: #f8fafc;
  }

  .reports-container {
    max-width: 1400px;
    margin: 2rem auto;
    padding: 0 2rem;
  }

  /* –ó–∞–≥–æ–ª–æ–≤–æ–∫ */
  .reports-header {
    background: white;
    border-bottom: 3px solid var(--primary);
    padding: 25px 30px;
    margin-bottom: 30px;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
  }

  .reports-title {
    font-size: 2rem;
    font-weight: 700;
    margin: 0;
    color: #1e293b;
    display: flex;
    align-items: center;
    gap: 12px;
  }

  /* –°—ñ—Ç–∫–∞ –∑–≤—ñ—Ç—ñ–≤ */
  .reports-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
  }

  .report-card {
    background: white;
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 20px;
    transition: all 0.25s ease;
    cursor: pointer;
    text-decoration: none;
    color: inherit;
    display: flex;
    flex-direction: column;
    gap: 12px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.05);
  }

  .report-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 6px 20px rgba(37, 99, 235, 0.2);
    border-color: var(--primary);
    text-decoration: none;
    color: inherit;
  }

  .report-icon {
    font-size: 2.5rem;
    width: 60px;
    height: 60px;
    background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .report-title {
    font-size: 1.2rem;
    font-weight: 600;
    margin: 0;
  }

  .report-desc {
    font-size: 0.9rem;
    color: var(--secondary);
    margin: 0;
  }

  /* –î–µ–Ω–Ω–∏–π –∑–≤—ñ—Ç */
  .daily-summary {
    background: white;
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 25px;
    margin-bottom: 30px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
  }

  .summary-title {
    font-size: 1.4rem;
    font-weight: 600;
    margin-bottom: 20px;
    color: #1e293b;
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .summary-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 15px;
  }

  .stat-card {
    background: var(--bg-light);
    padding: 15px;
    border-radius: 6px;
    border-left: 4px solid var(--primary);
  }

  .stat-label {
    font-size: 0.85rem;
    color: var(--secondary);
    text-transform: uppercase;
    font-weight: 600;
    margin-bottom: 5px;
  }

  .stat-value {
    font-size: 1.8rem;
    font-weight: 700;
    color: #1e293b;
  }

  .stat-unit {
    font-size: 0.9rem;
    color: var(--secondary);
    font-weight: 400;
  }

  .stat-count {
    font-size: 0.85rem;
    color: var(--secondary);
    margin-top: 3px;
  }

  /* –°–ø–∏—Å–∫–∏ */
  .reports-section {
    background: white;
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 25px;
    margin-bottom: 30px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
  }

  .section-title {
    font-size: 1.3rem;
    font-weight: 600;
    margin-bottom: 15px;
    color: #1e293b;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .section-link {
    font-size: 0.9rem;
    color: var(--primary);
    text-decoration: none;
    font-weight: 500;
  }

  .section-link:hover {
    text-decoration: underline;
  }

  .report-list {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .report-item {
    padding: 12px 0;
    border-bottom: 1px solid var(--border);
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .report-item:last-child {
    border-bottom: none;
  }

  .report-item-title {
    font-weight: 500;
    color: #1e293b;
  }

  .report-item-time {
    font-size: 0.85rem;
    color: var(--secondary);
  }

  .empty-state {
    text-align: center;
    padding: 40px 20px;
    color: var(--secondary);
  }

  .empty-icon {
    font-size: 3rem;
    margin-bottom: 10px;
    opacity: 0.5;
  }

  /* –ê–¥–∞–ø—Ç–∏–≤–Ω—ñ—Å—Ç—å */
  @media (max-width: 768px) {
    .reports-container {
      padding: 1rem;
    }

    .reports-header {
      padding: 20px;
    }

    .reports-title {
      font-size: 1.5rem;
    }

    .reports-grid {
      grid-template-columns: 1fr;
    }

    .summary-stats {
      grid-template-columns: 1fr;
    }
  }
</style>

<div class="reports-container">
  <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
  <div class="reports-header">
    <h1 class="reports-title">
      <span>üìä</span>
      <span>–ó–≤—ñ—Ç–∏ —Ç–∞ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞</span>
    </h1>
  </div>
    {% comment %} PDF –∑–≤—ñ—Ç–∏ link button big with icon {% endcomment %}
    <a href="{% url 'pdf_reports_dashboard' %}" class="btn btn-primary btn-lg">
      <i class="fas fa-file-pdf"></i> PDF –ó–≤—ñ—Ç–∏
    </a>
  </br>
  </br>
  <!-- –î–µ–Ω–Ω–∏–π –∑–≤—ñ—Ç -->
  <div class="daily-summary">
    <h2 class="summary-title">
      <span>üìÖ</span>
      <span>–ó–≤—ñ—Ç –∑–∞ {{ daily_summary.date }}</span>
    </h2>

    <div class="summary-stats">
      <!-- –í–Ω—É—Ç—Ä—ñ—à–Ω—ñ –ø–µ—Ä–µ–º—ñ—â–µ–Ω–Ω—è -->
      <div class="stat-card" style="border-left-color: var(--info);">
        <div class="stat-label">–í–Ω—É—Ç—Ä—ñ—à–Ω—ñ –ø–µ—Ä–µ–º—ñ—â–µ–Ω–Ω—è</div>
        <div class="stat-value">
          {{ daily_summary.weigher.total|floatformat:3 }}
          <span class="stat-unit">—Ç</span>
        </div>
        <div class="stat-count">–û–ø–µ—Ä–∞—Ü—ñ–π: {{ daily_summary.weigher.count }}</div>
      </div>

      <!-- –í—ñ–¥–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è -->
      <div class="stat-card" style="border-left-color: var(--warning);">
        <div class="stat-label">–í—ñ–¥–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è</div>
        <div class="stat-value">
          {{ daily_summary.shipment.total|floatformat:3 }}
          <span class="stat-unit">—Ç</span>
        </div>
        <div class="stat-count">–û–ø–µ—Ä–∞—Ü—ñ–π: {{ daily_summary.shipment.count }}</div>
      </div>

      <!-- –ù–∞–¥—Ö–æ–¥–∂–µ–Ω–Ω—è –∑ –ø–æ–ª—ñ–≤ -->
      <div class="stat-card" style="border-left-color: var(--success);">
        <div class="stat-label">–ù–∞–¥—Ö–æ–¥–∂–µ–Ω–Ω—è –∑ –ø–æ–ª—ñ–≤</div>
        <div class="stat-value">
          {{ daily_summary.fields.total|floatformat:3 }}
          <span class="stat-unit">—Ç</span>
        </div>
        <div class="stat-count">–û–ø–µ—Ä–∞—Ü—ñ–π: {{ daily_summary.fields.count }}</div>
      </div>

      <!-- –ó–∞–≥–∞–ª—å–Ω–∞ –≤–∞–≥–∞ -->
      <div class="stat-card" style="border-left-color: var(--primary);">
        <div class="stat-label">–í—Å—å–æ–≥–æ –∑–∞ –¥–µ–Ω—å</div>
        <div class="stat-value">
          {{ daily_summary.grand_total|floatformat:3 }}
          <span class="stat-unit">—Ç</span>
        </div>
      </div>
    </div>
  </div>

  <!-- –®–≤–∏–¥–∫—ñ –∑–≤—ñ—Ç–∏ -->
  <div class="reports-section">
    <h2 class="section-title">
      <span>üöÄ –®–≤–∏–¥–∫—ñ –∑–≤—ñ—Ç–∏</span>
    </h2>

    <div class="reports-grid">
      <a href="{% url 'report_balance' %}" class="report-card">
        <div class="report-icon">üì¶</div>
        <h3 class="report-title">–ó–∞–ª–∏—à–∫–∏</h3>
        <p class="report-desc">–ü–æ—Ç–æ—á–Ω—ñ –∑–∞–ª–∏—à–∫–∏ –ø–æ —Å–∫–ª–∞–¥–∞—Ö</p>
      </a>

      <a href="{% url 'report_waste' %}" class="report-card">
        <div class="report-icon">‚ôªÔ∏è</div>
        <h3 class="report-title">–í—ñ–¥—Ö–æ–¥–∏</h3>
        <p class="report-desc">–ê–Ω–∞–ª—ñ–∑ –≤—ñ–¥—Ö–æ–¥—ñ–≤ —Ç–∞ –≤—Ç—Ä–∞—Ç</p>
      </a>

      <a href="{% url 'report_weigher' %}" class="report-card">
        <div class="report-icon">üìã</div>
        <h3 class="report-title">–ü–µ—Ä–µ–º—ñ—â–µ–Ω–Ω—è</h3>
        <p class="report-desc">–í–Ω—É—Ç—Ä—ñ—à–Ω—ñ –ø–µ—Ä–µ–º—ñ—â–µ–Ω–Ω—è –∑–µ—Ä–Ω–∞</p>
      </a>

      <a href="{% url 'report_shipment' %}" class="report-card">
        <div class="report-icon">üöõ</div>
        <h3 class="report-title">–í—ñ–¥–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è</h3>
        <p class="report-desc">–í–≤–µ–∑–µ–Ω–Ω—è —Ç–∞ –≤–∏–≤–µ–∑–µ–Ω–Ω—è</p>
      </a>

      <a href="{% url 'report_fields' %}" class="report-card">
        <div class="report-icon">üå±</div>
        <h3 class="report-title">–ü–æ–ª—è</h3>
        <p class="report-desc">–ù–∞–¥—Ö–æ–¥–∂–µ–Ω–Ω—è –∑ –ø–æ–ª—ñ–≤</p>
      </a>

      <a href="{% url 'report_daily' %}" class="report-card">
        <div class="report-icon">üìÖ</div>
        <h3 class="report-title">–î–µ–Ω–Ω–∏–π –∑–≤—ñ—Ç</h3>
        <p class="report-desc">–ü—ñ–¥—Å—É–º–∫–∏ –∑–∞ –¥–µ–Ω—å</p>
      </a>
    </div>
  </div>

  <div class="row">
    <!-- –û—Å—Ç–∞–Ω–Ω—ñ –∑–≤—ñ—Ç–∏ -->
    <div class="col-md-6">
      <div class="reports-section">
        <h2 class="section-title">
          <span>üìú –Ü—Å—Ç–æ—Ä—ñ—è –∑–≤—ñ—Ç—ñ–≤</span>
          <a href="{% url 'report_history' %}" class="section-link">–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –≤—Å—ñ ‚Üí</a>
        </h2>

        {% if recent_reports %}
          <ul class="report-list">
            {% for execution in recent_reports %}
            <li class="report-item">
              <div class="report-item-title">{{ execution.template.name }}</div>
              <div class="report-item-time">{{ execution.executed_at|date:"d.m.Y H:i" }}</div>
            </li>
            {% endfor %}
          </ul>
        {% else %}
          <div class="empty-state">
            <div class="empty-icon">üìä</div>
            <p>–í–∏ —â–µ –Ω–µ —Å—Ç–≤–æ—Ä—é–≤–∞–ª–∏ –∑–≤—ñ—Ç–∏</p>
          </div>
        {% endif %}
      </div>
    </div>

    <!-- –ó–±–µ—Ä–µ–∂–µ–Ω—ñ –∑–≤—ñ—Ç–∏ -->
    <div class="col-md-6">
      <div class="reports-section">
        <h2 class="section-title">
          <span>üíæ –ó–±–µ—Ä–µ–∂–µ–Ω—ñ –∑–≤—ñ—Ç–∏</span>
          <a href="{% url 'saved_reports' %}" class="section-link">–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –≤—Å—ñ ‚Üí</a>
        </h2>

        {% if saved_reports %}
          <ul class="report-list">
            {% for saved in saved_reports %}
            <li class="report-item">
              <div class="report-item-title">{{ saved.name }}</div>
              <div class="report-item-time">{{ saved.created_at|date:"d.m.Y" }}</div>
            </li>
            {% endfor %}
          </ul>
        {% else %}
          <div class="empty-state">
            <div class="empty-icon">üíæ</div>
            <p>–ù–µ–º–∞—î –∑–±–µ—Ä–µ–∂–µ–Ω–∏—Ö –∑–≤—ñ—Ç—ñ–≤</p>
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</div>

{% endblock %}